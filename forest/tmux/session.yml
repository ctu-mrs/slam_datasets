name: forest
root: ./
startup_window: rosbag_play
pre_window: export UAV_NAME=uav11; export ROS_MASTER_URI=http://localhost:11311; export ROS_IP=127.0.0.1
windows:
  - roscore:
      layout: tiled
      panes:
        - roscore
  - rosbag_play:
      layout: tiled
      panes:
        - waitForRos; rosparam set use_sim_time true; rosbag play ../forest_dataset.bag --clock -r 1.0 --pause
  - tf_rtk_body:
      layout: tiled
      panes:
        - waitForRos; rosrun tf2_ros static_transform_publisher 0 0 0 0 0 0 $UAV_NAME/rtk_body $UAV_NAME/body
  - ouster_to_pc:
      layout: tiled
      panes:
        - waitForRos; rosparam set use_sim_time true; roslaunch ouster_ros uav.launch replay:=true metadata:=`pwd`/10.10.20.90.json
  - image_republish:
      layout: tiled
      panes:
        - waitForRos; rosparam set use_sim_time true; rosrun image_transport republish compressed in:=/$UAV_NAME/rgbd/color/image_raw raw out:=/$UAV_NAME/rgbd/color/image_raw
        - waitForRos; rosparam set use_sim_time true; rosrun image_transport republish compressedDepth in:=/$UAV_NAME/rgbd/aligned_depth_to_color/image_raw raw out:=/$UAV_NAME/rgbd/aligned_depth_to_color/image_raw
  - static_tfs:
      layout: tiled
      panes:
        - waitForRos; rosparam set use_sim_time true; roslaunch ./static_tfs.launch prefix:=slam
  - rviz:
      layout: tiled
      panes:
        - waitForRos; rosparam set use_sim_time true; rosrun rviz rviz -d ./rviz.rviz
